# 비트코인과 블록체인 (bitcoin and blockchain)
***
## Intro
- 사람 A가 사람 B에게 돈을 전달하려면? 직접 혹은 제3자
- 직접 : 가장 명확, 번거로움, 도난 등 위험, 거래 증명이 어려움
- 제3자 : 편리, 그러나 신뢰의 문제 -> 금융기관 시스템에 의지한 지불 시스템
- 금융기관 시스템의 단점 : 지불 번복의 가능성, 외부 공격의 위협
## 블록체인 네트워크의 등장
- 사토시 나카모토가 새로운 지불 시스템 제안
- 모든 거래내역을 전자서명 한 후 공개하자, 공개된 거래내역을 네트워크에 저장하자
- 비트코인 : 블록체인 네트워크를 활용한 지불 시스템
- 해커들의 해킹 의도를 없애려고 함 -> 거래소 해킹 시 기대값 높음 (블록체인 정신에는 어긋남)
## 전자 서명
- 지갑의 주인이 작성한 거래가 맞는지 어떻게 확인? 전자 서명
- 전자 서명을 이해하기 위해서는 암호화를 이해해야
- 암호화 : 원래 메시지를 특정 대상자만 알아볼 수 있도록 변조
- 복호화 : 암호화된 메시지를 원래의 메시지로 다시 복원
- 대칭키 암호화 : 키를 안전하게 보관하는 것이 중요, 사용자 증가 시 nC2개 키가 필요
- 공개키 암호화 : 복잡성 줄임, 공개키와 비밀키
- 암호화에서 prime key 중요 -> 큰 소수를 찾을수록 암호화에 유리
- 받는 사람의 공개키로 암호화, 보내는 사람의 개인키로 암호화
- 비트코인 지갑을 생성하면 공개키(지갑 주소)와 비밀키가 발급
## 작업 증명
- 악의를 가진 노드가 장부를 조작하면 어떤 장부를 믿어야 하는가?
- 두 장군의 딜레마 : 불확실한 연결 기반의 통신상황에서 동기화를 수행할 때 함정
- 연락병을 100% 신뢰할 수 없기 때문에 무한히 많은 확인이 필요
- 분산 환경에서 노드들이 다른 결과를 주었을 때, 어떤 분산 노드를 신뢰해야 하는가?
- 작업 증명을 통한 문제 해결 -> 배신자가 있다 해도 쉽게 찾아낼 수 있음
- what blockchains dream : 개인끼리 연결된 자유로운 네트워크
- 분산 네트워크 예시 : 분산처리를 활용한 P2P 전력거래, 에너지 프로슈머의 등장
## 블록체인의 구조
- 채굴 : 시간이 오래걸리는 단순 작업, 작업 증명 
- 해시 함수 : 임의의 길이의 데이터를 고정된 길이의 데이터를 요약하는 함수
- 모듈로(modular) 연산 : 임의의 숫자를 특정 값으로 나눈 후 남은 나머지 (비가역 연산)
- 1. 거래 정보가 전송되면 거래 정보의 요약본 생성
- 2. 블록 안에 거래 정보의 요약본을 차곡차곡 쌓는다
- 3. 일정 거래량이 쌓이면 모인 모든 거래 정보를 트리 구조로 요약
- 최종 해시된 결과값 : 머클 루트 (수정 및 조작 불가)
- 최종 블록의 해시값 : 이전 블록 해시값 + 해시 난수 + 머클 루트
- 4. 계산된 해시값이 일정 조건을 만족하는 해시 난수를 찾아야 함 (예: 해시 값이 12개의 0으로 시작 등)
- 마이닝 작업 : 해시 난수를 찾는 작업
- 5. 가장 먼저 정답 해시 난수를 찾는 노드가 이를 네트워크에 알리고 보상 획득
- 작업 증명은 높은 계산력을 필요로 하므로 네트워크에 참여한 전체 노드 중 과반이 선의를 가지는 경우 거래 장부 조작이 현실적으로 불가능
- 블록들이 너무 빨리 생성되면 난이도 조절 -> 조건을 더 까다롭게 만듦
- 블록체인 네트워크의 특징 : 모든 거래정보는 대중에 공개하지만 거래인의 정보를 알 수 없음
- 아는 사람과 비트코인 주고받는 경우 지갑번호 알게 되어서 정보 노출
- 이더리움 : 블록체인 네트워크에서 프로그래밍 된 함수 실행 가능, 네트워크의 최신 상태를 관리하는 DB 중요
- 유동적인 수수료를 활용하여 무한루프문 돌려도 마이너들에게 피해 가지 않도록
## 스마트 컨트랙트
- 디지털 명령어로 계약을 작성하면 조건에 따라 계약 내용 자동 실행이 가능
- 크립토키티 : 블록체인 네트워크를 통해 고양이를 조회하고 구매
## 향후 변화
- 기존의 화폐와 공존하면서 비효율적인 지불시스템 대체할 것
- 비트코인을 사용한 외한 거래
- 결제 시스템으로의 비트코인 (아르헨티나, 케냐)
- 매우 작은 금액의 거래 (컨텐츠, 기부)
- MIT 디지털 졸업 증명서, 에스토니아 전자정부
- 커피 값을 지불하기 위해 10~15분을 기다려야 한다면? 라이트코인
- 탈중앙화가 항상 좋은 결과를 가져오는가? 리플
- 비트코인의 가치가 안정적이지 않은 문제는? 테더
